<html>
  <head><title>Moon Battle Royale</title></head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.sound.min.js"></script>
    <script>
      var aacc;
var avel;
var acc;
var ground;
var pos;
var ang = 0;
var ded = false;

function land(x,y,w,h){
this.x=x;
this.y=y;
this.w=w;
this.h=h;
this.render=function(){
rect(this.x,this.y,this.w,this.h);
}
}

function c(x,y,w,h,xx,yy,ww,hh){
var crash = false;
if (dist(x,y,xx,yy)<25) {
crash = true;
}
return crash;
}

function setup() {
ground = new land(200,395,400,10);
acc = createVector(0, 0);
vel = createVector(0, 0);
aacc = createVector(0, 0);
avel = createVector(0, 0);
pos = createVector(200, 200);
createCanvas(400, 400);
rectMode(CENTER);
}

function render() {
fill(190);
ground.render();
fill(255, 0, 0);
if(ded){text("you have exploded",pos.x,pos.y);}
push();
translate(pos.x, pos.y);
rotate(ang);

rect(0, 0, 40, 40);
pop();
text(ang+"",10,20);
}

function tick() {
if (keyIsDown(38) || mouseIsPressed){
acc.y+=-0.005*Math.sin(ang*180/Math.PI);
} else {
acc.y+=0.01*Math.sin(ang*180/Math.PI);
}
if(c(pos.x,pos.y,40,40,ground.x,ground.y)){acc.y=0}
if((ang*180/Math.PI<=-10||ang*180/Math.PI>=10)&&c(pos.x,pos.y,40,40,ground.x,ground.y)){ded=true;}
if(ded){return;}
if (mouseIsPressed && mouseX > 200) {
ang += 0.01;
} else if (mouseIsPressed && mouseX < 200) {
ang -= 0.01;
}
pos.add(acc);
}

function mouseDragged() {
acc.y -= 0.005;
acc.y -= 0.01;
pos.add(acc);
}

function draw() {
background(220);
tick();
render();
}
    </script>
  </body>
</html>
